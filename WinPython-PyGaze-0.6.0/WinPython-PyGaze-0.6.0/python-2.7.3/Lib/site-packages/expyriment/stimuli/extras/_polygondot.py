#!/usr/bin/env python

"""
A dot stimulus.

This module contains a class implementing a dot stimulus.

"""

__author__ = 'Florian Krause <siebenhundertzehn@gmail.com>, \
Oliver Lindemann <lindemann09@gmail.com>'
__version__ = '0.6.2'
__revision__ = '23032f47ffea'
__date__ = 'Wed Dec 12 15:49:59 2012 +0100'


import defaults
from expyriment.stimuli.extras._polygonellipse import PolygonEllipse

class PolygonDot(PolygonEllipse):
    """A class implementing a dot as a child of PolygonEllipse."""

    def __init__(self, radius, position=None, colour=None,
                 resolution_factor=None, anti_aliasing=None):
        """Create a dot.

        Keyword arguments:
        radius   -- the radius of the dot (int)
        position -- the position of the stimulus (int,int) (optional)
        colour   -- the colour of the dot (int,int,int) (optional)
        resolution_factor -- The resolution_factor increases the resolution of
                             the eclipse. The default factor is 1 resulting in
                             36 points describing the ellipse. (optional)
        anti_aliasing -- the anti aliasing parameter (int) (optional)

        """

        if position is None:
            position = defaults.polygondot_position
        if colour is None:
            colour = defaults.polygondot_colour
        if anti_aliasing is None:
            anti_aliasing = defaults.polygondot_anti_aliasing
        if resolution_factor is None:
            resolution_factor = defaults.polygondot_resolution_factor

        if radius == 0:
            radius = 0.5
        PolygonEllipse.__init__(self, size=[2 * radius, 2 * radius], position=position,
                        resolution_factor=resolution_factor,
                        colour=colour, line_width=0)

    @property
    def radius(self):
        """Getter for radius."""
        return self.ellipse_size[0] / 2

    def is_center_inside(self, other):
        """Return True if the center is inside another dot.

        Keyword arguments:
        other -- the other dot (expyriment.stimuli.PolygonDot object)

        """

        d = self.distance(other)
        return (d <= other.radius)

    def is_inside(self, other):
        """Return True if the whole dot is inside anoother dot.

        Keyword arguments:
        other -- the other dot (expyriment.stimuli.PolygonDot object)

        """

        d = self.distance(other)
        return (d <= other.radius - self.radius)



if __name__ == "__main__":
    from expyriment import control
    control.set_develop_mode(True)
    defaults.event_logging = 0
    exp = control.initialize()
    dot = PolygonDot(radius=100)
    dot.present()
    exp.clock.wait(1000)
